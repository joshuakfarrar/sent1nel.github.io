<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Anarchy and the Post-Simulationist Archetype</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="https://use.typekit.net/kxo7pbr.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </head>
    <body>
        <div id="header">
            <div class="container">
                <div class="row">
                    <div class="col-md-8">
                        <div id="logo">
                            <a href="../">Anarchy and the Post–Simulationist Archetype.</a>
                            <span>books, politics, and polyglot functional programming</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <ul class="navigation float-right">
                            <li><a href="../about.html">About</a></li>
                            <li><a href="../contact.html">Contact</a></li>
                            <li><a href="../archive.html">Archive</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
	<div class="info">
	    Posted on November  8, 2018
	    
	</div>

	<h1 id="functional-programming">Functional Programming</h1>
<h3 id="how-am-i-doing">How am I doing?</h3>
<p>Let’s look at some code —</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode scala"><code class="sourceCode scala"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">class</span> Application[F[_]] {</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  <span class="co">/* ... */</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">  <span class="kw">implicit</span> <span class="kw">val</span> categoriesDecoder: EntityDecoder[F, Categories] = jsonOf[F, Categories]</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">  <span class="kw">def</span> <span class="fu">categories</span>(contextId: Long)(<span class="kw">implicit</span> client: Client[F]): Either[ParseFailure, F[Categories]] =</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">    <span class="kw">for</span> {</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">      uri &lt;- Uri.<span class="fu">fromString</span>(s<span class="st">&quot;https://${environment.host}/api/v2/contexts/$contextId/gradebook/categories&quot;</span>)</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">      request = Request[F](uri = uri, headers = headers)</a>
<a class="sourceLine" id="cb1-11" data-line-number="11">    } <span class="kw">yield</span> client.<span class="fu">expect</span>[Categories](request)</a>
<a class="sourceLine" id="cb1-12" data-line-number="12">}</a></code></pre></div>
<ul>
<li>I am not actually parameterizing over configuration for the environment, which I likely will as I move to make this code more dynamic</li>
<li>Higher-Kinded Types (HKTs) to parameterize over execution context (<code>IO</code> from <code>cats-effect</code>, but could be <code>scalaz-zio</code>)</li>
<li>I am more familiar with the uses and limits of <code>object</code> vs <code>class</code> and <code>trait</code></li>
<li>I grok <code>map</code> and <code>flatMap</code>, and their relationship to the elegant, useful <code>for</code> comprehension</li>
<li><code>Main</code> (entry point) extends <code>IOApp</code> from <code>cats</code> (Neat!)</li>
<li>Side-effects isolated to <code>Main.run</code></li>
<li><code>poi.scala</code> is decent</li>
<li>If I needed to, I am comfortable using Doobie to fetch data from a database instead of via an HTTP request</li>
</ul>
<p>I am still unsure of how to think about long-running programs. A typical game or web server is written around a loop, which either updates the application state, or loops while waiting for requests, which are then handed off to request handlers. This program exits early in the event of an error, or after a report has successfully been generated. If I wanted it to run more continuously, how would I structure this code? FP for Mortals appears to have solutions, plus there is also <code>Stream[IO]</code> via fs2.</p>
</div>

        <div class="container">
            <div id="footer">
                Site proudly generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a>.
            </div>
        </div>
    </body>
</html>
